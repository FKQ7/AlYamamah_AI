{% extends "base.html" %}
      {% block content %}
      <section class="Hero sm:my-16 xl:my-24" dir="rtl" >
        <div class="py-32 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-12">
          <div class="grid max-w-screen-xl px-4 py-8 mx-auto lg:gap-8 xl:gap-0 lg:py-16 lg:grid-cols-12">
            <div class="mr-auto place-self-center lg:col-span-7">
              <h1 class="max-w-2xl mb-4 text-4xl font-extrabold tracking-tight leading-none md:text-5xl xl:text-7xl pb-5">
                {% if user.is_authenticated %}
                    Ù‡Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡ ÙŠØ§ <span class="font-normal text-primary-600">{{user.first_name}}</span> ÙÙŠ Ø§Ù„ÙŠÙ…Ø§Ù…Ø©
                {% else %}
                    Ù‡Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡ ÙÙŠ Ø§Ù„ÙŠÙ…Ø§Ù…Ø©
                {% endif %}
            </h1>
                <p class="max-w-2xl xl:w-[90%] mb-10 text-gray-500 lg:mb-8 md:text-lg lg:text-xl">
                  ÙƒÙ„ Ø§Ø®Ø¨Ø§Ø±, Ù…Ù‚Ø§Ù„Ø§Øª, Ùˆ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ ÙÙŠ Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ø­Ø¯ ÙŠØ¶Ù…Ù† ÙƒÙ„ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø³ÙˆØ§Ø¡ Ø·Ø§Ù„Ø¨ Ø§Ù… Ù…Ù‡ØªÙ… ÙÙŠ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©
                </p>
                <a href="/chat" class="inline-flex items-center justify-center px-5 py-3 mr-3 text-base font-medium text-center text-white rounded-lg bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 ">
                   Yu Ai ØªØ­Ø¯Ø« Ù…Ø¹
                </a>
                <a href="/news" class="inline-flex items-center justify-center px-5 py-3 text-base font-medium text-center text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:ring-gray-100">
                  Ø§Ø®Ø± Ø§Ù„Ø§Ø®Ø¨Ø§Ø± ğŸ“°
                </a> 
            </div>
            <div class="hidden lg:mt-0 lg:col-span-5 lg:flex">
                <img src="/media/uni.jpg" class="relative z-10 h-[500px] rounded-2xl w-full object-cover" alt="mockup">
            </div>
        </div>
        </div>
      </section>
      <section class="News-blogs my-20 container md:my-52 mx-auto border-y-8 border-black h-full pb-20 md:h-full xl:h-full">
        <div class="py-8 lg:mx-auto lg:max-w-screen-2xl text-center lg:py-16 lg:px-12">
          <h1 class="text-center mt-10 mb-4 md:mt-10 text-7xl  font-bold">
            Ù…Ø§ Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŸ
          </h1>
          <p class="mb-8 text-lg font-normal text-center text-gray-500 lg:text-2xl sm:px-16 xl:px-48 ">!ÙƒÙ† Ø¹Ù„Ù‰ Ø§Ø·Ù„Ø§Ø¹ Ø¨Ù…Ø³ØªØ¬Ø¯Ø§Øª Ø¬Ø§Ù…Ø¹ØªÙƒ</p>
          <div class="hidden texttt xl:block" dir="rtl">
            <div class="flex justify-between w-full mx-auto pb-3">
              <p class="pr- text-5xl font-bold">Ø§Ø®Ø¨Ø§Ø±</p>
              <p class="pr-12 text-5xl font-bold">Ù…Ù‚Ø§Ù„Ø§Øª</p>
              <p></p>
            </div>
          </div>
          <!--CARDS SECTION!!!!!-->
          <div class="flex flex-col px-2 xl:flex-row md:container md:mx-auto md:px-16 xl:px-0" dir="rtl">
                  
                  <div class="w-full xl:w-1/2 xl:px-1">
                    <div class="xl:hidden text-right px-5 pb-2 text-5xl font-bold " dir="rtl">
                      <p>Ø§Ø®Ø¨Ø§Ø±</p>
                    </div>
                    
                    {% for news_item in news|slice:":3" %}
                    <a href="/news/{{ news_item.id }}" class="block w-full">
                      <div class="w-full lg:h-[230px] rounded-md " dir="rtl">
                        <div class="flex w-full h-full p-3 border-[2px] hover:bg-[#eeede8] border-primary-400 text-text rounded-lg xl:rounded-xl mt-2 shadow-md" >
                          <img class="w-[80px] h-[80px] sm:w-[100px] sm:h-[100px] md:w-[152px] md:h-[152px] lg:w-[170px] lg:h-[170px] rounded-xl object-cover mb-3 md:mb-0 md:mr-4" 
                              src="/media/{{ news_item.img }}" alt="ØµÙˆØ±Ø© Ø®Ø¨Ø± {{ news_item.title }}">
                    
                          <div class="flex flex-col justify-between pr-2 w-full">
                            <h1 class="7-words text-right hover:underline text-primary-500 font-bold text-md sm:text-xl lg:text-2xl xl:text-right leading-snug mb-2">
                              {{ news_item.title }}
                            </h1>
                            <div class="mb-4 text-right">
                              <div class="hidden lg:inline text-right text-sm sm:text-md">
                                {{ news_item.content|truncatewords:30|safe }}
                              </div>
                            </div>
                            <div class="flex">
                              <img class="rounded-full w-[24px] h-[24px] ml-2" src="https://placehold.co/300x300" alt="">
                              <p class="text-right text-sm sm:text-md text-primary-500">
                                {{ news_item.author.first_name }} {{ news_item.author.last_name }}
                              </p>
                            </div>
                            <p class="text-sm text-right sm:text-md text-gray-400">
                              ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: {{ news_item.date_start }}
                            </p>
                          </div>
                        </div>
                      </div>
                    </a>
                    {% endfor %}
                  </div>

                  <div class="w-full xl:w-1/2 xl:px-1 mt-4 xl:mt-0">
                    <div class="xl:hidden text-right mx-auto px-5 pb-2 text-5xl font-bold " dir="rtl">
                      <p>Ù…Ù‚Ø§Ù„Ø§Øª</p>
                    </div>
                    
                    {% for blog in blogs|slice:":2" %}
                    <a href="/blog/{{ blog.id }}" class="block hover:bg-[#eeede8]"> 
                      <div class="w-full border-[3px] border-primary-400 text-text h-full rounded-md xl:rounded-xl mt-2 mb-4">
                        <div class="w-full h-full p-5 border-primary-400 text-text rounded-lg shadow-md lg:flex">
                          <img class="w-full h-[200px] rounded-xl object-cover mb-3 md:h-[50%] lg:w-[290px] lg:h-[289px]" 
                              src="{{ blog.img.url }}" alt="ØµÙˆØ±Ø© Ù…Ù‚Ø§Ù„ {{ blog.title }}">
                    
                          <div class="flex flex-col justify-between pr-2 w-full lg:px-5">
                            <h1 class="font-bold hover:underline text-primary-500 text-xl md:text-3xl lg:text-2xl text-right leading-snug mb-2">
                              {{ blog.title }}
                            </h1>
                            <div class="text-right lg:pb-5">
                              <p class="text-right text-md md:text-lg inline mb-4 lg:text-md">
                                {{ blog.content|truncatewords:20|safe }}
                              </p>
                            </div>
                            <div class="flex mt-4">
                              <img class="rounded-full w-[35px] h-[35px] ml-2" src="https://placehold.co/300x300" alt="ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§ØªØ¨">
                              <p class="text-right text-md md:text-lg text-primary-500">
                                {{ blog.author.first_name }} {{ blog.author.last_name }}
                              </p>
                            </div>
                            <p class="text-md text-right md:text-lg text-gray-400">
                              ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: {{ blog.date }}
                            </p>
                          </div>
                        </div>
                      </div>
                    </a>
                    {% endfor %}
                  </div>
                  
          </div>

          </div>
          </div>
      </section>
      <section class="Clubs my-20 container md:my-52 mx-auto border-b-8 border-black h-full pb-20 md:h-full xl:h-full">
        <div class="">
            <h2 class="text-6xl font-bold xl:text-right text-center text-gray-900 mb-4">
               Ù†ÙˆØ§Ø¯ÙŠÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠÙ‘Ø²Ø©
            </h2>
            <div class="flex flex-col items-center gap-2 xl:flex-row-reverse xl:justify-between">
              <p class="text-2xl font-normal text-gray-600">
                Ø®Ù„Ùƒ Ø§Ù‚Ø±Ø¨ Ù…Ø¹ Ù…Ø¹ Ù†ÙˆØ§Ø¯ÙŠÙ†Ø§
              </p>
              <p class="text-2xl font-normal text-primary-600 underline">
                <a href="/clubs">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
              </p>
            </div>
        </div>
        <div class="mt-8 p-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">

          <div class="bg-black aspect-square">
            <img class="w-full h-full object-cover" src="https://placehold.co/200x200" alt="placeholder image">
          </div>

          <div class="bg-black aspect-square">
            <img class="w-full h-full object-cover" src="https://placehold.co/200x200" alt="placeholder image">
          </div>

          <div class="bg-black aspect-square">
            <img class="w-full h-full object-cover" src="https://placehold.co/200x200" alt="placeholder image">
          </div>

          <div class="bg-black aspect-square">
            <img class="w-full h-full object-cover" src="https://placehold.co/200x200" alt="placeholder image">
          </div>

          <div class="bg-black aspect-square">
            <img class="w-full h-full object-cover" src="https://placehold.co/200x200" alt="placeholder image">
          </div>
          
          <div class="bg-black aspect-square">
            <img class="w-full h-full object-cover" src="https://placehold.co/200x200" alt="placeholder image">
          </div>

        </div>
      </section>
      <section class="Calendar my-20 container mx-auto md:my-60 h-full md:h-full xl:h-full">
        <div class="lg:px-12 lg:px-2">
            <div class="w-full max-w-7xl mx-auto px-2 ">
              <h2 class="text-6xl font-bold xl:text-left text-center text-gray-900 mb-4">
                Ù…ØªÙ‰ Ø§Ù„Ø­Ø¯Ø«ØŸ
              </h2>
              <p class="text-2xl font-normal xl:text-left text-gray-600 text-center mb-8">
                !Ù„Ø§ ÙŠÙÙˆØªÙƒ Ø´ÙŠØ¡
              </p>
            <div class="grid grid-cols-12 gap-8 max-w-4xl mx-auto xl:max-w-full">
                
                <div class="col-span-12 bg-gray-50 p-2 rounded-2xl xl:col-span-5">
                {% for events in events %}
                  <div class="flex gap-5 mb-2 flex-col" dir="rtl">
                    <div class="p-6 xl:mt-1 rounded-xl bg-white border-[1px] border-primary-400">
                      <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2.5">
                          <span class="event-color w-2.5 h-2.5 rounded-full" data-index="{{ forloop.counter0 }}"></span>
                          <p class="text-base font-medium text-gray-900">
                            Ù…Ù† {{events.event_date}} Ø§Ù„Ù‰ {{events.event_date_end}}
                          </p>
                        </div>
                      </div>
                      <h6 class="text-2xl leading-8 font-semibold text-black mb-1">
                        {{events.title}}

                      </h6>
                      <p class="text-md font-normal text-gray-600">
                         {{events.content}}
                      </p>
                    </div>
                  </div>
                {% endfor %}

                  
                  
                </div>
                <div class="col-span-12 xl:col-span-7 px-2.5 py-5 sm:p-8 h-full xl:h-[650px] bg-white rounded-2xl max-xl:row-start-1">
                  <div class="flex flex-col md:flex-row gap-4 items-center justify-between mb-5">
                      <div class="flex items-center gap-4">
                          <h5 class="text-xl leading-8 font-semibold text-gray-900" id="current-month">Jun 2025</h5>
                          <div class="flex items-center">
                              <button id="prev-month" class="text-orange-600 p-1 rounded transition-all duration-300 hover:text-white hover:bg-orange-600">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none">
                                      <path d="M10.0002 11.9999L6 7.99971L10.0025 3.99719" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"></path>
                                  </svg>
                              </button>
                              <button id="next-month" class="text-orange-600 p-1 rounded transition-all duration-300 hover:text-white hover:bg-orange-600">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none">
                                      <path d="M6.00236 3.99707L10.0025 7.99723L6 11.9998" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"></path>
                                  </svg>
                              </button>
                          </div>
                      </div>
                  </div>
              
                  <div class="grid grid-cols-7 rounded-t-3xl border-b border-orange-200">
                      <div class="py-3.5 border-r rounded-tl-xl border-orange-200 bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Sun</div>
                      <div class="py-3.5 border-r border-orange-200 bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Mon</div>
                      <div class="py-3.5 border-r border-orange-200 bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Tue</div>
                      <div class="py-3.5 border-r border-orange-200 bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Wed</div>
                      <div class="py-3.5 border-r border-orange-200 bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Thu</div>
                      <div class="py-3.5 border-r border-orange-200 bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Fri</div>
                      <div class="py-3.5 rounded-tr-xl bg-orange-50 flex items-center justify-center text-sm font-medium text-orange-600">Sat</div>
                  </div>
              
                  <div class="border border-orange-200 rounded-xl">
                      <div class="grid grid-cols-7" id="calendar-grid">
                            <!-- Calendar dates dynamically populated -->
                      </div>
                  </div>
              </div>
              </div>
            </div>
          </div>
        </section>
        <script>
          const currentDate = new Date();
// Define your events array with dynamic color placeholders
const events = [
  {% for event in events %}
  {
    date: "{{ event.event_date|date:'Y-m-d' }}",
    title: "{{ event.title }}",
    color: "", // Placeholder for color
    index: {{ forloop.counter0 }} // Store the index to assign color dynamically
  }
  {% if not forloop.last %},{% endif %}
  {% endfor %}
];

// Assign colors dynamically based on the index
events.forEach((event) => {
  if (event.index % 5 === 0) {
    event.color = "bg-red-200"; 
  } else if (event.index % 4 === 0) {
    event.color = "bg-green-200"; 
  } else if (event.index % 3 === 0) {
    event.color = "bg-blue-200"; 
  } else if (event.index % 2 === 0) {
    event.color = "bg-yellow-200"; 
  } else {
    event.color = "bg-purple-200"; 
  }
});

// Apply colors to each event's color span
document.querySelectorAll('.event-color').forEach((span, index) => {
  const event = events[index];
  span.classList.add(event.color); 
});

console.log(events);

// Get references to HTML elements
const currentMonthEl = document.getElementById('current-month');
const calendarGridEl = document.getElementById('calendar-grid');
const prevMonthBtn = document.getElementById('prev-month');
const nextMonthBtn = document.getElementById('next-month');

// Utility function to get a Date object in the Saudi Arabia time zone
function getSaudiDate(dateString) {
  // Convert to Saudi Arabia time zone by using `toLocaleString` and then create a new Date
  const localDate = new Date(new Date(dateString).toLocaleString("en-US", { timeZone: "Asia/Riyadh" }));
  return {
    year: localDate.getFullYear(),
    month: localDate.getMonth(),
    day: localDate.getDate()
  };
}

// Function to render the calendar
function renderCalendar(date) {
  const month = date.getMonth();
  const year = date.getFullYear();
  currentMonthEl.textContent = date.toLocaleString('default', { month: 'long', year: 'numeric' });

  const firstDayOfMonth = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();

  calendarGridEl.innerHTML = '';

  // Fill in blank days before the first day of the month
  for (let i = 0; i < firstDayOfMonth; i++) {
    calendarGridEl.innerHTML += `<div class="p-2"></div>`;
  }

  // Render actual days and events
  for (let i = 1; i <= daysInMonth; i++) {
    const day = new Date(year, month, i).toISOString().split('T')[0];
    const dayEvents = events.filter(event => event.date === day);

    let eventMarkup = '';
    dayEvents.forEach(event => {
      eventMarkup += `<div class="text-sm font-medium ${event.color} rounded p-1 mt-1">${event.title}</div>`;
    });

    // Get the current date in Saudi Arabia timezone
    const saudiCurrentDate = getSaudiDate(new Date());
    const isToday = saudiCurrentDate.year === year && saudiCurrentDate.month === month && saudiCurrentDate.day === i;

    calendarGridEl.innerHTML += `
    <div 
      class="calendar-cell flex flex-col border border-gray-50 items-center justify-center p-1 sm:p-5 text-center transition-colors duration-300 
             ${isToday ? 'bg-primary-200' : 'bg-white'} hover:bg-orange-100"
    >
      <span class="text-md font-bold ${isToday ? 'bg-primary-200' : ''}">${i}</span>
      <div class="event-list text-sm space-y-1 w-full">${eventMarkup || ''}</div>
    </div>
    `;
  }
}

// Event listeners for previous and next month buttons
prevMonthBtn.addEventListener('click', () => {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar(currentDate);
});

nextMonthBtn.addEventListener('click', () => {
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar(currentDate);
});

// Initial render of the calendar
renderCalendar(currentDate);

          
        </script>
        {% endblock content %}  
